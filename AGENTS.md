# Haier Project Tracker — AGENTS

## 1. Назначение проекта

Haier Project Tracker — локальное веб-приложение для личного ведения проектов по запуску новых продуктов на рынок.

Основные задачи системы:

- управление продуктовыми группами и проектами;
- ведение go-to-market (GTM) этапов;
- управление задачами и подзадачами;
- хранение характеристик продукта на двух языках (RU/EN) рядом;
- работа с медиа (обложка и галерея);
- импорт/экспорт данных через Excel;
- архивирование и удаление сущностей;
- контекстные меню по правой кнопке мыши.

Проект используется одним человеком. Многопользовательский режим и сложные роли не требуются.

Источник истины по функционалу: **`Haier_Project_Tracker_TZ.md`** в корне репозитория.

---

## 2. Роль и цели агента

Агент работает как «главный разработчик» Haier Project Tracker.

### 2.1. Основные цели

- Реализовывать и развивать приложение строго по ТЗ `Haier_Project_Tracker_TZ.md`.
- Не добавлять новый функционал, не описанный в ТЗ, без явного запроса пользователя.
- Следить, чтобы все описанные сущности и операции были реализованы:
  - продуктовые группы, проекты, GTM-этапы;
  - задачи, подзадачи, комментарии;
  - характеристики (RU/EN рядом);
  - файлы, галерея и обложка;
  - архивирование и удаление;
  - контекстные меню по правой кнопке мыши;
  - импорт/экспорт через Excel;
  - резервные копии.

- Поддерживать архитектуру и код в читаемом и расширяемом виде.

---

## 3. Источники истины

Агент всегда считает источниками истины:

1. `Haier_Project_Tracker_TZ.md` — полное ТЗ на систему.  
2. Структуру и содержимое репозитория (файлы кода, конфигурации и т.д.).  
3. Дополнительные пояснения пользователя в истории запросов.

При расхождении между текущим кодом и ТЗ приоритет у **ТЗ**, если пользователь явно не сказал иначе.

---

## 4. Общие правила поведения

1. **Перед тем как менять код**:
   - просмотреть заголовки и ключевые разделы `Haier_Project_Tracker_TZ.md`;
   - осмотреть структуру проекта (директории, ключевые модули).

2. **Не фантазировать**:
   - не придумывать несуществующие файлы, директории, сущности или «готовый функционал»;
   - не утверждать, что что-то реализовано, если это не было создано или явно обнаружено в коде.

3. **Ясно обозначать допущения**:
   - если что-то в ТЗ неоднозначно, сформулировать, что именно неясно, и предложить 1–2 конкретных варианта реализации для согласования.

4. **Сохранять работоспособность**:
   - по возможности не ломать уже рабочие сценарии;
   - если изменение может повлиять на существующее поведение, явно указать это.

5. **Фиксировать результат**:
   - по завершении существенного шага кратко описывать:
     - что сделано;
     - какие файлы изменены;
     - какой пользовательский сценарий теперь работает.

---

## 5. Работа с ТЗ и сущностями

Агент обязан реализовать и поддерживать следующую функциональность (см. подробности в `Haier_Project_Tracker_TZ.md`):

### 5.1. Продуктовые группы

- Поля: название, описание, статус (Активна / Архивирована), бренды, дополнительные пользовательские поля.
- Операции:
  - создать;
  - редактировать;
  - архивировать и восстанавливать;
  - удалять (с продуманной логикой по связанным проектам, согласуемой с пользователем).
- Отображения:
  - список групп со сводной информацией (количество проектов, наличие рисков и т.д.).
- Фильтры:
  - по статусу (включая опцию «Показывать архив»);
  - по бренду и другим полям (в т.ч. пользовательским).
- Контекстное меню по правой кнопке:
  - открыть;
  - редактировать;
  - архивировать / восстановить;
  - удалить.

### 5.2. Проекты

- Поля:
  - название;
  - ссылка на продуктовую группу;
  - бренд;
  - рынок/регион;
  - краткое и расширенное описание;
  - статус (Активный / Закрыт / Архивирован);
  - текущий GTM-этап;
  - плановая и фактическая дата запуска;
  - приоритет;
  - пользовательские поля.

- Вкладки в карточке проекта:
  - GTM-этапы;
  - характеристики (RU/EN);
  - задачи и подзадачи;
  - галерея;
  - файлы;
  - комментарии;
  - история изменений.

- Операции:
  - создать;
  - редактировать;
  - закрыть (изменение статуса);
  - архивировать / восстановить;
  - удалить проект с его дочерними объектами:
    - GTM-этапы, задачи, подзадачи;
    - характеристики;
    - файлы;
    - изображения;
    - комментарии.

- Контекстное меню:
  - открыть;
  - редактировать;
  - закрыть;
  - архивировать / восстановить;
  - дублировать (создание нового проекта на основе структуры текущего, при необходимости);
  - удалить.

### 5.3. GTM-этапы

- Поля:
  - название;
  - описание (критерий завершения);
  - порядок;
  - плановая дата начала/окончания;
  - фактическая дата завершения;
  - статус (Не начат / В работе / Завершён / Отменён);
  - признак риска;
  - чек-лист пунктов этапа.

- Операции:
  - добавить;
  - редактировать;
  - менять порядок;
  - дублировать;
  - удалять;
  - сохранять структуру этапов как шаблон;
  - применять шаблон к другим проектам;
  - импорт/экспорт структуры этапов через Excel.

- Контекстное меню:
  - редактировать;
  - добавить/редактировать чек-лист;
  - дублировать;
  - удалить.

### 5.4. Задачи и подзадачи

- Задачи:
  - поля: заголовок, описание, статус (ToDo / В работе / Готово), срок, важность, привязка к GTM-этапу;
  - имеют комментарии и подзадачи.

- Подзадачи:
  - текст пункта;
  - флаг «выполнено / не выполнено».

- Представления:
  - список задач (табличный вид);
  - доска по статусам.

- Операции:
  - создать, редактировать, изменить статус, дублировать (при необходимости), удалить;
  - для подзадач: создать, редактировать текст, отметить выполненной, удалить.

- Комментарии к задачам:
  - текст, дата/время;
  - создание, опционально редактирование, удаление.

- Контекстное меню:
  - для задач и подзадач: открыть/редактировать, поменять статус (где применимо), дублировать (если нужно), удалить.

### 5.5. Характеристики продукта (две языковые колонки)

- Структура:
  - секции;
  - поля внутри секций.

- Поля характеристики:
  - Label RU;
  - Label EN;
  - Value RU;
  - Value EN;
  - тип (текст, число, список, флажок, при необходимости другие).

- Требование: RU и EN значения отображаются рядом для удобного сопоставления.

- Операции:
  - создавать, переименовывать, удалять секции;
  - добавлять/удалять/редактировать поля;
  - задавать Label RU/EN и тип;
  - менять порядок секций и полей;
  - формировать шаблоны характеристик;
  - копировать структуру характеристик (без значений) из другого проекта;
  - импорт/экспорт характеристик в Excel.

- Контекстное меню:
  - для секций и полей — редактировать, дублировать (если уместно), удалить.

### 5.6. Галерея и обложка

- Галерея:
  - загрузка изображений;
  - подпись/комментарий;
  - дата;
  - изменение порядка.

- Обложка:
  - выбор изображения из галереи;
  - обложка квадратная, используется везде, где проект отображается кратко.

- Операции:
  - добавить изображение;
  - изменить подпись;
  - назначить обложкой;
  - удалить.

- Контекстное меню по изображению:
  - просмотреть;
  - назначить обложкой;
  - изменить подпись;
  - удалить.

### 5.7. Файлы и документы

- Поля:
  - имя файла;
  - описание;
  - категория (техдок, маркетинг, юридические и т.п., список настраиваемый);
  - дата загрузки.

- Операции:
  - загрузить;
  - редактировать описание/категорию;
  - скачать;
  - удалить.

- Контекстное меню:
  - скачать;
  - изменить описание/категорию;
  - удалить.

### 5.8. Комментарии и история

- Комментарии к проектам:
  - текст, дата/время;
  - создание, при необходимости редактирование, удаление.

- История изменений:
  - ключевые события:
    - изменение статусов проектов и GTM-этапов;
    - создание/удаление задач;
    - изменения характеристик (укрупнённо);
    - операции с файлами и изображениями;
    - смена обложки;
  - отображается лентой внутри проекта.

---

## 6. Архивирование, скрытие и удаление

Агент обязан соблюсти следующую логику:

- Проекты:
  - статусы: Активный / Закрыт / Архивирован;
  - архивные по умолчанию скрыты и показываются только при включённом фильтре;
  - доступно удаление с подтверждением, с корректным удалением дочерних сущностей.

- Продуктовые группы:
  - статусы: Активна / Архивирована;
  - архивные по умолчанию скрыты;
  - удаление — с подтверждением и понятной логикой для связанных проектов (запрашивается у пользователя, если нужно).

- Задачи:
  - статус «Готово» = закрыта;
  - опция скрыть выполненные в интерфейсе;
  - возможность удалить задачу с подтверждением.

Во всех местах, где предусмотрено удаление, обязательно использовать подтверждающий диалог.

---

## 7. Импорт/экспорт

Агент реализует:

- импорт/экспорт характеристик (RU/EN) через Excel;
- импорт/экспорт GTM-этапов и их шаблонов;
- экспорт списка проектов и ключевых данных.

Требования:

- понятные заголовки столбцов;
- сопоставление при импорте по секции и Label RU/EN для характеристик, по названиям этапов для GTM;
- при ошибках импорта возвращать понятное сообщение, что именно не удалось сопоставить и почему.

---

## 8. Резервное копирование

- Реализовать функции:
  - «Сохранить резервную копию базы» (экспорт в файл);
  - «Восстановить из резервной копии» (загрузка файла).
- Обеспечить возможность ручного копирования основного файла данных пользователем.

---

## 9. Процесс работы агента

1. При новом запросе по этому проекту:
   - убедиться, что контекст репозитория загружен;
   - освежить в памяти структуру `Haier_Project_Tracker_TZ.md`;
   - при необходимости просмотреть `project-plan.md` и `dev_tasks.md`.
   - для правок используй `fixes_and_improvements.md`

2. Перед изменением кода:
   - кратко сформулировать план действий для текущего шага.

3. После изменения кода:
   - перечислить изменённые файлы;
   - описать, какие сценарии теперь должны работать;
   - указать, если есть риски или изменилось поведение чего-то существующего.

4. Никогда не заявлять о наличии функционала, если он не был явно реализован или обнаружен в коде.

