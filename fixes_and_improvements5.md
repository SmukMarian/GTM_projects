# fixes_and_improvements5

## 2. Страница «Управление характеристиками»

### 2.1. Общий стиль и вёрстка страницы

- [x] Привести внешний вид страницы к стилю остальных экранов (карточка проекта и т.п.):
  - Использовать те же карточки/контейнеры (скругление, тень, фон), что и на странице карточки проекта.
  - Внешние отступы между блоками (панель действий, форма добавления секции, список секций) сделать такими же, как между карточками на других страницах.
- [x] Выровнять сетку:
  - Левые края: заголовок «Управление характеристиками», форма добавления секции, карточки секций и таблица полей должны быть по одной вертикали.
  - Высота и вертикальные отступы у заголовков, кнопок, инпутов — выровнять между собой (нет визуального «скакания»).
- [x] Адаптив:
  - На ширинах ~1366px и меньше элементы не должны ломаться в хаотичные строки.
  - При очень широкой ширине ограничить максимальную ширину центрального контейнера, чтобы контент не «растягивался» на весь экран.

### 2.2. Панель действий над характеристиками (верхние кнопки)

- [x] Логически сгруппировать кнопки:
  - Группа 1: `Добавить секцию`.
  - Группа 2: `Выберите шаблон` + `Применить шаблон` + `Сохранить как шаблон` + `Копировать структуру`.
  - Группа 3: `Импорт Excel` + `Экспорт Excel`.
  - Между группами сделать чуть больший горизонтальный отступ.
- [x] Поведение селекта шаблонов:
  - Если шаблонов нет — селект задизейблен, placeholder «Нет сохранённых шаблонов».
  - Пока шаблон не выбран — `Применить шаблон` задизейблена.
- [x] Состояния кнопок:
  - На время долгих операций (`Импорт`, `Экспорт`, применение / сохранение шаблона, копирование структуры):
    - кнопка переходит в состояние loading (спиннер и дизейбл),
    - запрет повторных кликов.
  - При успехе/ошибке показывать toast-уведомление с коротким текстом.
- [x] Текст «Импорт принимает столбцы…»:
  - Переформатировать в компактный абзац или маркированный список, чтобы не было одной очень длинной строки.
  - Текст вынести в локализацию (без хардкода в компоненте).

### 2.3. Форма «Добавление секции»

- [x] Оформить как явную форму:
  - Поля: `Название секции` (обязательное), `Порядок` (select/number, по умолчанию «Авто»).
  - Кнопки: `Добавить секцию` (primary) и `Очистить` (link/ghost).
- [x] Валидация:
  - `Название секции` не может быть пустым, состоять только из пробелов и должно иметь минимальную длину (например, ≥ 3 символов).
  - Названия секций должны быть уникальны в рамках сущности (товара / проекта). При попытке создать дубликат выводить ошибку «Секция с таким названием уже существует».
- [x] UX:
  - Нажатие Enter в поле `Название секции` отправляет форму (если валидна).
  - При успешном создании:
    - форма очищается,
    - фокус возвращается в поле `Название секции`,
    - новая секция добавляется в список ниже без перезагрузки страницы.
  - Кнопка `Очистить` сбрасывает поля и убирает сообщения валидации.

### 2.4. Карточка секции и список полей (блок «ваув»)

#### Карточка секции

- [x] Привести карточку секции к единому виду с карточками на странице проекта:
  - Тот же фон, скругления и тень.
  - Внутренний `padding` по периметру, чтобы таблица не прилегала вплотную к границе.
- [x] Заголовок секции:
  - Отображать название секции крупнее и жирнее, ниже — `Порядок: N` более мелким текстом.
  - Добавить визуальный разделитель (тонкая линия или дополнительный отступ) между заголовком и панелью действий (`Редактировать`, `+ Поле`, `Вверх`, `Вниз`, `Удалить`).

#### Действия с секцией

- [x] Кнопки `Вверх`/`Вниз`:
  - При достижении верхней/нижней позиции — дизейблить соответствующую кнопку.
  - После смены порядка обновлять сортировку секций без перезагрузки страницы.
- [x] Кнопка `Удалить`:
  - Запрашивать подтверждение (модалка) с текстом, что будут удалены все поля секции.
- [x] Режим редактирования секции:
  - `Редактировать` переводит заголовок в инпут (название секции) + при необходимости поле `Порядок`.
  - Добавить кнопки `Сохранить` и `Отмена` в этом режиме.
  - Применить те же правила валидации, что и при создании секции.

#### Таблица полей

- [x] Выровнять таблицу визуально:
  - Заголовки столбцов (`Label RU`, `Label EN`, `Value RU`, `Value EN`, `Тип`, `Действия`) выровнять по вертикали, задать одинаковые отступы сверху/снизу.
  - Добавить внутренний отступ слева/справа, чтобы текст и инпуты не «липли» к границе ячейки.
  - Внешние края таблицы не должны примыкать к границе карточки секции — добавить `padding`.
- [x] Привести поведение ячеек к единому виду:
  - Сейчас в таблице смешаны обычные текстовые значения и инпуты — нужно определить одну модель:
    - либо все значения редактируются inline (ячейки всегда инпуты/селекты),
    - либо по умолчанию отображается текст, а при нажатии `Редактировать` строка переходит в режим редактирования (инпуты/селекты только в этой строке).
  - Выбрать один вариант и реализовать его во всех строках одинаково.
- [x] Работоспособность `Редактировать` в строке:
  - По клику `Редактировать`:
    - строка переходит в режим редактирования (Label/Value/Тип — инпуты или соответствующие компоненты),
    - кнопка `Редактировать` заменяется на `Сохранить` и `Отмена`.
  - `Сохранить` отправляет изменения на сервер, при успехе переводит строку обратно в режим просмотра.
  - `Отмена` возвращает исходные значения без сохранения.
- [x] Колонка `Тип`:
  - Использовать селект с доступными типами (`text`, `number`, `select`, `checkbox`, `other`…), значения — строго из списка, никаких произвольных строк.
  - В режиме просмотра выводить человекочитаемое название типа (локализованное).
- [x] Checkbox-поля:
  - Привести отображение чекбоксов к единому стилю (та же высота и выравнивание по центру строки).
  - При клике по чекбоксу значение сохраняется, либо:
    - сохраняется сразу по клику, с анимацией/индикатором сохранения,
    - или изменяется только в режиме редактирования строки — выбрать один вариант и использовать везде одинаково.
- [x] Кнопки в колонке `Действия`:
  - Выстроить одну и ту же последовательность во всех строках: `Редактировать` | стрелки `↑`/`↓` | `Удалить`.
  - Выравнивание по центру строки, одинаковые отступы между кнопками.
  - Дизейблить стрелки `↑`/`↓` по тем же правилам, что и для секций (нет перемещения вверх/вниз за границы списка).

### 2.5. Блок «Новое поле» (создание поля в секции)

- [x] Показ/скрытие:
  - `+ Поле` открывает блок добавления поля **только** в выбранной секции.
  - Одновременно может быть открыт только один блок «Новое поле» — при открытии нового предыдущий закрывается.
- [x] Структура формы:
  - Поля: `Label RU` (обяз.), `Label EN` (опц.), `Тип поля` (обяз.), при необходимости — дополнительные настройки.
- [x] Валидация:
  - `Label RU` не пустой, без одних пробелов.
  - Если `Label EN` заполнен — тоже проверять минимальную длину.
  - `Тип поля` обязательно выбран.
- [x] Поведение:
  - `Создать поле` — отправка запроса, кнопка и форма уходят в состояние loading на время запроса.
  - При успехе:
    - форма очищается,
    - таблица полей обновляется,
    - блок либо остаётся открытым для следующего поля, либо закрывается — выбрать один вариант и использовать везде.
  - `Отмена` закрывает блок и сбрасывает введённые данные.

### 2.6. Импорт / экспорт Excel

- [x] Импорт:
  - Проверять наличие обязательных столбцов: `Секция`, `Label RU`, `Label EN`, `Value RU`, `Value EN`, `Тип поля`.
  - Обрабатывать необязательные столбцы `Порядок секции`, `Порядок поля`:
    - если не переданы — использовать авто-порядок.
  - Определить и реализовать стратегию при совпадении секции и label с уже существующими:
    - либо обновление существующих полей,
    - либо создание новых, но с явной логикой (например, добавлять суффикс).
  - После импорта показывать краткий отчёт: сколько секций/полей создано, обновлено, пропущено.
- [x] Экспорт:
  - Экспортировать текущую структуру в том же формате, который принимает импорт.
  - Учитывать фактический порядок секций и полей.
  - Генерировать осмысленное имя файла (например, с датой и идентификатором проекта).

### 2.7. Ошибки, уведомления, i18n

- [x] Все надписи и сообщения (подсказки, ошибки, названия столбцов/кнопок) вынести в систему локализации.
- [x] Реализовать клиентскую валидацию до отправки запроса + корректную обработку ошибок с сервера:
  - сетевые ошибки,
  - ошибки валидации с бэка.
- [x] При ошибках:
  - показывать уведомление (toast) с понятным текстом,
  - откатывать визуальное состояние (например, не оставлять строку в режиме редактирования при неуспешном сохранении).
- [x] Обеспечить нормальную навигацию с клавиатуры:
  - логичный порядок перехода по Tab,
  - фокус возвращается на понятный элемент после успешного действия.

## 3. Переключатель темы в шапке

- [x] Убрать текстовые подписи из отображения выбранной темы в шапке:
  - В верхнем баре отображаются только иконки темы без текста (`Светлая`, `Системная`, `Тёмная`).
  - На месте нынешней надписи «Светлая» оставить только кружок-иконку текущей темы.
- [x] Внутри дропдауна:
  - Оставить только иконки для выбора темы, без текстовых подписей.
  - Добавить `title`/tooltip при наведении (например, «Светлая тема», «Системная тема», «Тёмная тема»), чтобы пользователь всё равно понимал, что выбирает.
- [x] Проверить адаптивность:
  - На узких экранах иконка темы не должна «ломать» верстку шапки.
- [x] Состояния:
  - Текущая выбранная тема визуально подсвечивается (фон/рамка/иконка), но без текстового лейбла.

## 4. Карточка проекта — блок с фото

- [x] Исправить растягивание фонового изображения:
  - Настроить стиль так, чтобы изображение не деформировалось по вертикали/горизонтали.
  - Использовать поведение "вписать" или "обрезать по контейнеру" (аналог `object-fit: contain` или `cover`) вместо растягивания.
- [x] Ограничить пропорции контейнера:
  - Зафиксировать разумное соотношение сторон для блока фото (например, приблизительно вертикальный прямоугольник, как сейчас на макете).
  - На разных высотах/разрешениях блок не должен визуально «раздуваться» или «сжиматься» слишком сильно.
- [x] Выровнять блок с фото с остальными карточками:
  - Использовать те же отступы и скругления, что и у остальных блоков карточки проекта.
  - Проверить, что тень и фон блока совпадают с остальными карточками.
- [x] Галерея:
  - При наличии нескольких изображений обеспечить:
    - корректное масштабирование всех миниатюр,
    - отсутствие «обрезания» важных частей,
    - одинаковые отступы между фото.

## 5. Фавикон

- [x] Установить единый фавикон для всего приложения:
  - Использовать иконку Projects Tracker (как в логотипе в шапке) в качестве фавикона.
- [x] Обновить `<link rel="icon">` во всех шаблонах/точках входа:
  - Для SPA-приложения — убедиться, что фавикон подключён в основном HTML-шаблоне (например, `public/index.html` или аналог).
  - Для SSR/мультистраничных конфигураций — убедиться, что фавикон прописан во всех layout’ах.
- [x] Проверить отображение фавикона:
  - В основных браузерах (Chrome, Edge, Firefox, Safari).
  - Во вкладках, списке закладок и на экране PWA (если используется).
- [x] Удалить или обновить старые/неиспользуемые иконки, чтобы не было конфликта между разными вариантами.
