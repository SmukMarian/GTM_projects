# Haier Project Tracker — Backlog доработок

Отмечай выполненные пункты, заменяя `[ ]` на `[x]`.

---

## 1. Дашборд и метрики

- [ ] Переработать визуальный вид дашборда
  - Сделать блоки более структурированными и визуально чистыми.
  - Выровнять сетку, отступы, заголовки, подписи.

- [ ] Добавить ключевые KPI и метрики на дашборд
  - Количество активных, закрытых и архивных проектов.
  - Количество проектов по брендам.
  - Количество проектов по статусу GTM (например: на ранних этапах, в середине цепочки, на финальных этапах).
  - Количество проектов с просроченными этапами/задачами.
  - Количество активных продуктовых групп и групп с «проблемными» проектами.

- [ ] Сделать визуализацию KPI
  - Небольшие графики/диаграммы или прогресс-бары для:
    - доли завершённых проектов;
    - доли проектов с просрочками;
    - прогресса по GTM внутри ключевых проектов.
  - Отдельный блок «Риски» с кратким списком наиболее проблемных проектов.

- [ ] Улучшить блок ближайших дедлайнов
  - Отображать ближайшие GTM-этапы и задачи с датами и проектами.
  - Визуально выделять просроченные элементы.

- [ ] Сделать дашборд кликабельным
  - Переходы в проекты или группы по клику на соответствующие строки/карточки.
  - Возможность быстро фильтровать дашборд по бренду, группе и статусу проекта.

---

## 2. Общий UI / UX и визуальный стиль

- [ ] Улучшить общий интерфейс приложения
  - Пересмотреть визуальную иерархию элементов (заголовки, подзаголовки, подписи).
  - Сделать интерфейс более читаемым и «воздушным».

- [ ] Сделать более равномерный задний фон
  - Убрать резкие цветовые “пятна”.
  - Вывести единый базовый фон с аккуратными разделителями блоков.

- [ ] Настроить корректные отступы между полями и блоками
  - Выровнять вертикальные и горизонтальные отступы между:
    - полями ввода;
    - карточками;
    - секциями внутри страниц.

- [ ] Привести интерфейс к современному виду с учётом практик Web 2.0 / Web 3.0
  - Использовать аккуратные тени, скругления, типографику.
  - Добавить понятные состояния наведения/клика/фокуса.
  - Минимизировать визуальный шум, использовать карточки, бейджи, прогресс-бары.

---

## 3. Навигация, страницы проектов и групп

- [ ] Вынести проекты в отдельную страницу
  - Страница «Проекты» с сеткой карточек:
    - 4 карточки в ряд;
    - слева — картинка проекта (обложка);
    - справа — основные данные (название, группа, бренд, статус, ключевые даты);
    - отображать статус-бар прогресса проекта (по GTM или задачам).

- [ ] После создания проекта переходить внутрь проекта
  - После успешного создания проекта автоматически открывать страницу этого проекта.
  - На странице списка проектов добавить явную кнопку «Перейти в проект» (и/или сделать карточку кликабельной).

- [ ] Вынести продуктовые группы в отдельную страницу
  - Страница «Продуктовые группы» с сеткой:
    - 3 карточки в ряд;
    - у карточки: обложка, название, статистика по проектам, статус-бар группы.
  - Проекты внутри группы открывать на новой странице проектов.

- [ ] Добавить кнопку «Перейти в группу»
  - На карточке группы сделать понятную кнопку/зону перехода внутрь группы.

- [ ] Добавить favicon, логотип и глобальное меню
  - Добавить favicon для приложения.
  - Добавить логотип в шапку, по клику возвращающий на главную/дашборд.
  - Реализовать глобальное меню (например: Дашборд / Продуктовые группы / Проекты / Шаблоны / Настройки), доступное на всех основных страницах.

---

## 4. Карточка проекта: шапка и GTM

- [ ] Улучшить шапку карточки проекта
  - Слева: название, бренд, группа, рынок, статус, плановая/фактическая дата запуска.
  - Справа: картинка проекта:
    - возможность загрузить;
    - заменить;
    - удалить.

- [ ] Добавить в шапку проекта статус-бар
  - Отображать прогресс по GTM-этапам (сколько завершено из общего количества).
  - Визуально показывать общий статус проекта (цвет/индикатор).

- [ ] Исправить проблемы с GTM-этапами (создание/обновление)
  - Устранить ошибку `AttributeError: 'GTMStage' object has no attribute 'name'` при создании этапа:
    - скорректировать обращение к полю имени этапа (`created.name` → корректное поле модели, например `title`).
  - Устранить аналогичную ошибку при обновлении этапа (`existing.name` → корректное поле).
  - Проверить:
    - создание этапов;
    - изменение статуса/дат;
    - сохранение шаблона GTM;
    - применение шаблона к проекту;
    - запись событий в историю без ошибок 500.

---

## 5. Характеристики, задачи, подзадачи, комментарии

- [ ] Сделать ввод характеристик инлайн, без модальных диалогов
  - Разрешить редактирование значений прямо в таблице характеристик.
  - Обеспечить автосохранение (или понятный механизм сохранения) при изменении ячеек.
  - Сохранить отображение RU и EN значений рядом.

- [ ] Сделать ввод подзадач инлайн
  - Добавление подзадач прямо под задачей:
    - поле ввода + кнопка добавления, без отдельного окна.
  - Позволить редактировать текст подзадач на месте.

- [ ] Связать подзадачи с прогрессом задачи
  - Сделать, чтобы прогресс задачи зависел от доли выполненных подзадач.
  - Отображать прогресс задачи (мини-прогресс-бар или процент).

- [ ] Визуально улучшить задачи и подзадачи
  - Выделить подзадачи отступами, чекбоксами и визуально облегчённой структурой.
  - Добиться удобного вертикального восприятия списка задач.

- [ ] Изменить ввод комментариев на инлайн + текстовый редактор
  - Комментарии вводить внутри блока комментариев, без обязательного модального окна.
  - Добавить лёгкий текстовый редактор (жирный, курсив, списки, ссылки).
  - Позволить редактировать и удалять комментарии (по необходимости, с пометкой «изменён»).

---

## 6. Галерея, обложка и история изменений

- [ ] Сделать галерею и работу с обложкой компактнее
  - Переработать макет галереи: компактная сетка/лента.
  - Показывать подписи к изображениям аккуратно и читаемо.

- [ ] Добавить лайтбокс для изображений
  - При клике на изображение открывать его в оверлее.
  - Дать возможность листать изображения стрелками/кнопками.

- [ ] Обозначить текущую обложку и упростить выбор
  - Ясно показывать, какое изображение сейчас является обложкой.
  - Оставить кнопку «Сделать обложкой» с понятным откликом.

- [ ] Сделать историю изменений компактной и второстепенной
  - Перевести историю в сворачиваемый блок/аккордеон (например, «История изменений»).
  - По умолчанию блок может быть свёрнут.
  - Использовать компактный формат записи (дата, действие, короткое описание).

---

## 7. Шаблоны, кастомные поля и ID

- [ ] Добавить раздел/страницу «Шаблоны»
  - Список шаблонов GTM-этапов.
  - Список шаблонов характеристик.
  - Возможность:
    - просматривать;
    - редактировать;
    - переименовывать;
    - удалять шаблоны;
    - создавать новые шаблоны без привязки к конкретному проекту (по необходимости).

- [ ] Добавить кастомные поля для GTM-этапов
  - Позволить добавлять к этапам пользовательские поля:
    - текстовые;
    - числовые;
    - флажки;
    - (при необходимости) списки.
  - Обеспечить:
    - добавление/редактирование/удаление этих полей;
    - сохранение структуры в шаблонах GTM.

- [ ] Ввести короткие цифровые ID для карточек
  - Определить логику формирования короткого ID (например, последовательный номер или с префиксом).
  - Для проектов (и, возможно, групп/задач):
    - хранить UUID как внутренний идентификатор;
    - отображать короткий цифровой ID в интерфейсе.
  - В шапке проекта показывать его ID.
  - Добавить кнопку «Скопировать ID»:
    - по нажатию копировать ID в буфер обмена;
    - показать короткий фидбек («ID скопирован»).

---

## 8. Backend: фикса ошибок и регрессия

- [ ] Исправить ошибки, связанные с GTMStage и полем `name`
  - Обновить код в `create_gtm_stage` и `update_gtm_stage`:
    - заменить обращения к `*.name` на корректное поле (например, `title`) или добавить поле `name` во все слои модели.
  - Убедиться, что логирование событий не падает с 500.

- [ ] Пройтись по логам и убедиться, что нет повторяющихся 500 ошибок
  - Проверить логи после исправления:
    - создание и обновление GTM-этапов;
    - создание/редактирование задач, подзадач, характеристик, файлов, изображений, комментариев;
    - работу с шаблонами;
    - историю изменений.

- [ ] Провести регрессионное тестирование ключевых сценариев
  - Создание/редактирование/архивирование/удаление:
    - групп,
    - проектов,
    - этапов,
    - задач и подзадач,
    - характеристик,
    - файлов,
    - изображений,
    - комментариев.
  - Проверка:
    - дашборда,
    - шаблонов,
    - истории изменений,
    - навигации через меню и карточки.

