# Projects Tracker — Дополнительные правки UI/UX (волна 4)

Отмечай выполненные пункты, заменяя `[ ]` на `[x]`.

---

## 0. Дашборд

- [x] Логика отображения архивных групп
  - Сделать чекбокс «Показывать архивные группы» более логичным и читаемым:
    - выровнять текст по вертикали с чекбоксом;
    - убрать наезд текста на сам чекбокс;
    - при отключённом чекбоксе не показывать архивные группы нигде в виджетах дашборда.

---

## 1. Управление группами

- [x] Изменить поведение клика по карточке группы
  - При клике на саму карточку группы:
    - выполнять **переход в эту группу** (страница группы);
  - Быстрый просмотр оставить только на отдельной кнопке:
    - например, «Быстрый просмотр» или иконка «глаз» в карточке.

---

## 2. Управление проектами (список и фильтры)

- [x] Выровнять статусы в блоке фильтров
  - Чекбоксы «Активные / Закрытые / Архив» выстроить в одну строку, с равными отступами.
  - Следить, чтобы подписи не сползали вниз и не разъезжались при изменении ширины окна.

---

## 3. Карточка проекта: попапы, задачи, ярлыки

### 3.1. Попапы на странице проекта

- [x] Убрать/переопределить глобальное `width: 100%` в попапах
  - Найти обёртку форм в модальных окнах, где используется `width: 100%;` и из-за этого поля растягиваются и налезают друг на друга.
  - Решение:
    - использовать flex-контейнеры с `gap` для строк формы;
    - ширину отдельных полей задавать через `flex: 1` / `flex-basis`, а не глобальным `width: 100%`.

### 3.2. Комментарии к задачам

- [x] Перенести комментарии в иконку справа от задачи
  - Убрать постоянно висящий снизу блок комментариев к задаче.
  - Для каждой задачи:
    - справа добавить иконку «комментарии» (например, пузырь диалога) с числом комментариев;
    - по клику открывать **pop-up с расширенным редактором** комментариев (история + форма добавления).
  - Попап:
    - полноценный текстовый редактор (жирный, списки, ссылки и т.п.);
    - аккуратная вёрстка и отступы.

- [x] Дать возможность сворачивать задачи
  - Реализовать у задачи режим «свернуть/развернуть»:
    - в свёрнутом виде показывать только заголовок, статус, ярлыки (важность/срочность/риск) и прогресс;
    - в развёрнутом — описание, подзадачи, чек-листы, базовую инфу.

### 3.3. Важность / срочность / риск

- [x] Упростить чекбокс «Отметить как важную»
  - В попапе редактирования задачи чекбокс важности разместить в одной строке:
    - «[ ] Важная задача» рядом с подписью;
    - уменьшить высоту строки и отступы, чтобы элемент не выглядел слишком громоздким.

- [x] Исправить читаемость ярлыка важности в светлой теме
  - Обновить цвет фона и текста бейджа «важно», чтобы он был контрастным и читаемым на светлом фоне.
  - Проверить состояние hover/active.

- [x] Добавить ярлык срочности
  - Для задач ввести ярлык «Срочно» (например, high urgency):
    - визуально отличимый от важности (другой цвет);
    - логика: можно хранить поле вроде `urgency: normal / high`.
  - Отображать ярлык на карточке задачи рядом с ярлыком важности.

- [x] Исправить читаемость индикатора риска в светлой теме
  - Перекрасить бейдж/иконку риска:
    - подобрать цвет иконки и фона, который будет хорошо читаться в светлой теме;
    - сохранить связь с «риском» (например, жёлтый/оранжевый/красный).

### 3.4. Комментарии к GTM-этапам

- [x] Перевести комментарии к этапам в иконку / вкладку
  - Убрать постоянно висящий снизу блок комментариев к GTM-этапам.
  - Для каждого этапа:
    - добавить иконку комментариев (как у задач) рядом с названием этапа;
    - по клику открывать попап с комментариями к этапу (аналогично задачам).
  - Дополнительно можно реализовать вторую вкладку в блоке GTM («Этапы» / «Комментарии»), если так удобнее по логике.

### 3.5. Компактные виды этапов и задач

- [x] Сделать GTM-этапы сворачиваемыми и добавить компактный режим просмотра
  - У этапов должны быть кнопки «свернуть/развернуть», чтобы описание, сроки и задачи можно было скрывать.
  - Добавить альтернативный вид в формате таблицы, чтобы быстро просматривать этапы без карточек.

- [x] Вернуть канбан доску задач с перетаскиванием по статусам
  - На странице проекта добавить отдельный блок с колонками ToDo / В работе / Готово.
  - Поддержать drag-and-drop между колонками и отображение ключевых меток (важно/срочно/срок).
  - Добавить переключатель между таблицей задач и канбаном.

### 3.6. Пользовательские поля в основных параметрах

- [x] Добавить управление кастомными парами «ключ-значение» прямо в попапе «Основные параметры проекта»
  - В форме редактирования проекта должна быть возможность добавлять/удалять пользовательские поля без выхода из модального окна.
  - На карточке проекта отрисовать эти поля отдельным блоком, чтобы их значения были всегда под рукой.
- [x] Сделать блок пользовательских полей заметным прямо в «Основных параметрах»
  - Вывести отдельный заголовок и кнопку быстрого перехода к редактированию полей из карточки проекта.
  - В модальном окне предусмотреть отдельный контейнер с кнопкой «➕ Поле», чтобы добавление пары ключ/значение не терялось среди остальных полей.

---

## 4. Идея: глобальная страница важных и срочных задач

- [x] Добавить ссылку с дашборда на страницу важных/срочных задач
  - На дашборде добавить блок/карту «Важные и срочные задачи» с ссылкой.

- [x] Реализовать отдельную страницу со сводкой задач
  - Страница должна показывать:
    - все **важные** задачи;
    - все **срочные** задачи;
    - возможные столбцы (колонки):
      - «Важные и срочные»;
      - «Важные, но не срочные»;
      - «Срочные, но не важные» (если нужно).
  - Для каждой задачи отображать:
    - название задачи;
    - проект;
    - GTM-этап;
    - срок;
    - ярлыки важности/срочности/риска.

- [x] Переход к задаче из списка
  - По клику на задачу в этой сводке:
    - открывать соответствующий проект и разворачивать нужную задачу;
    - либо открывать попап задачи прямо из сводки (решить и реализовать один вариант).

---

## 5. Характеристики (редактирование и импорт)

- [x] Добавлять лейблы характеристик инлайн, без попапов
  - Структуру секций и полей редактировать прямо в карточке: кнопка «➕ Поле» раскрывает форму в секции без перехода в модальные окна.
  - Все основные параметры (названия, типы) редактируются инлайн, а существующие значения остаются доступными в таблице.

- [ ] Сделать импорт характеристик «полным»
  - При импорте из Excel/CSV должна быть возможность задать:
    - и `Label` (название поля),
    - и `Value` (значение),
    - и, при необходимости, язык (RU/EN) и тип поля.
  - Текущий импорт доработать так, чтобы:
    - можно было массово загрузить структуру и значения одновременно;
    - корректно обрабатывались новые и существующие поля.

- [ ] Сделать импорт характеристик «полным»
  - При импорте из Excel/CSV должна быть возможность задать:
    - и `Label` (название поля),
    - и `Value` (значение),
    - и, при необходимости, язык (RU/EN) и тип поля.
  - Текущий импорт доработать так, чтобы:
    - можно было массово загрузить структуру и значения одновременно;
    - корректно обрабатывались новые и существующие поля.

- [x] Убрать/переопределить `width: 100%` на странице характеристик
  - Найти контейнеры, где `width: 100%` ломает сетку (поля наезжают друг на друга).
  - Заменить на:
    - адекватные ширины колонок для таблицы характеристик;
    - flex-контейнеры с `gap` и фиксированными/относительными ширинами колонок.

- [x] Починить типы полей в характеристиках и шаблонах
  - Убедиться, что выбор типа поля работает:
    - `text`, `number`, `boolean`, `select` (или другие, которые предусмотрены).
  - Для каждого типа:
    - корректно рендерить контрол (строка ввода, число, чекбокс, выпадающий список и т.п.);
    - сохранять значение в проект, включая корректную поддержку `0` и булевых значений;
    - корректно применять и хранить структуру в шаблонах характеристик.
- [x] Перевести добавление полей в секциях характеристик в полноценный инлайн-режим
  - При клике на «➕ Поле» должна раскрываться встроенная форма прямо под секцией без модальных окон.
  - Форма должна автоматически прокручиваться в область видимости и позволять сохранить/отменить действие одной кнопкой.
- [x] Убрать глобальное `width: 100%` на инлайн-инпутах характеристик
  - Настроить поля так, чтобы они подстраивались по ширине таблицы и не ломали вёрстку на широких экранах.
- [x] Корректно сохранять значения характеристик с учётом типа
  - Числовые поля перед сохранением приводить к числу, чекбоксы — к булевому значению.
  - Обновить API/модели так, чтобы `value_ru/value_en` принимали строки, числа и булевы значения.

---

## 6. Дополнительные правки мая 2025

- [x] Починить страницу «Важные и срочные задачи»
  - Убрать бесконечный индикатор загрузки, если API временно недоступен, и правильно скрывать спиннер.
  - Сделать фон без повторений, добавить «фикс» растяжения и вернуть переключатель темы к правому краю.

- [x] Вернуть рабочее поведение чекбокса «Показывать архивные группы» на дашборде
  - Сохранять состояние и сразу перезагружать виджеты при переключении.

- [x] Починить отступы панели действий у GTM-этапов
  - Обеспечить появление `margin-bottom` у `.toolbar` в блоке этапов, чтобы кнопки не прилипали к контенту.

- [x] Выровнять статусы фильтра на странице «Управление проектами» в одну строку
  - Блок статусов должен занимать всю ширину сетки фильтров, чтобы чекбоксы не складывались в колонку.

- [x] Ребрендинг интерфейса
  - Переименовать продукт с «Projects Tracker» на «Projects Tracker» во всех заголовках, описаниях и строках навигации.
  - Добавить единый подвал с подписью «Made by Smuk Marian / 2025» мелким моноширинным шрифтом.
