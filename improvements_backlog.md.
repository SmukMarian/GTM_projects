# Haier Project Tracker — Backlog доработок

Этот список описывает доработки для уже реализованного проекта.  
Приоритеты:
- **P1** — критично, блокирует или сильно ломает логику.
- **P2** — важно для удобства и понятности.
- **P3** — визуальный/UX-полиш, но ощутимо улучшает опыт.

---

## 1. UI / UX: общий вид и современный интерфейс

1. [P2] **Улучшить общий интерфейс приложения**
   - Пересмотреть визуальную иерархию элементов.
   - Сделать интерфейс более понятным и легкочитаемым, без перегруза.
   - Осознанно использовать заголовки, подзаголовки, подписи к полям.

2. [P2] **Сделать более равномерный задний фон**
   - Убрать резкие переходы и «рваные» блоки фона.
   - Привести фон к ровной, чистой базе с мягкими разделителями секций.

3. [P2] **Сделать правильные отступы между полями и блоками**
   - Настроить вертикальные и горизонтальные отступы между:
     - полями ввода,
     - секциями,
     - карточками.
   - Обеспечить визуально ровную сетку, чтобы интерфейс воспринимался как единый и аккуратный.

4. [P2] **Привести интерфейс к современному виду (Web 2.0 / Web 3.0 best practices)**
   - Использовать:
     - чёткую типографику,
     - понятные контрастные, но не кислотные элементы,
     - плавные состояния hover/active/focus.
   - Аккуратные тени и скругления, лаконичные иконки.
   - Минимизировать «визуальный шум», использовать визуальный язык карточек, бейджей и прогресс-баров.

---

## 2. Навигация, страницы проектов и продуктовых групп

5. [P1] **Проекты — вынести в отдельную страницу и изменить навигацию**
   - Страница «Проекты» с сеткой карточек проектов (по умолчанию):
     - расположение: **4 карточки в ряд**;
     - слева — картинка проекта (обложка),
     - справа — основная информация: название, группа, бренд, ключевые метаданные;
     - в карточке показывать статус-бар прогресса проекта.
   - После создания проекта:
     - не оставаться на текущем экране,
     - **автоматически открывать страницу этого проекта** (детальная карточка).
   - Для существующих проектов:
     - добавить явную кнопку **«Перейти в проект»** (и/или clickable-card).

6. [P1] **Продуктовые группы — отдельная страница и карточки**
   - Страница «Продуктовые группы»:
     - сетка карточек: **3 карточки в ряд**;
     - каждая карточка:
       - обложка группы,
       - название,
       - ключевая статистика (количество проектов, активных, закрытых, наличие рисков),
       - статус-бар «здоровья» группы (по продуманной логике).
   - Проекты внутри группы:
     - открываются на отдельной странице (как сейчас проекты — отдельный экран).
   - Добавить кнопку **«Перейти в группу»** на карточке.

7. [P2] **Favicon, логотип и глобальное меню**
   - Добавить **favicon** и логотип приложения.
   - В шапке (header):
     - логотип, по клику возвращающий на главную/дашборд;
     - глобальное меню (например, пункты: «Дашборд», «Продуктовые группы», «Проекты», «Шаблоны», «Настройки»).
   - Меню должно быть доступно на всех основных страницах.

---

## 3. Карточка проекта: шапка, статус и GTM

8. [P1] **Улучшить шапку карточки проекта**
   - В шапке проекта:
     - слева: название проекта и ключевые поля (бренд, группа, рынок, статус, плановая дата запуска);
     - справа: **картинка проекта**, которую можно:
       - загрузить,
       - заменить,
       - удалить.
   - В шапке также отобразить **статус-бар проекта**:
     - прогресс по GTM-этапам (количество завершённых / всего);
     - визуальный индикатор статуса (цвет/иконка).

9. [P1] **Исправить проблему с GTM-этапами (добавление/обновление)**
   - Текущая ошибка backend:
     - при создании GTM-этапа:
       - `AttributeError: 'GTMStage' object has no attribute 'name'` в `create_gtm_stage` при вызове `log_event(..., created.name)`;
     - при обновлении GTM-этапа:
       - тот же `AttributeError` в `update_gtm_stage` при обращении к `existing.name`.
   - Требуется:
     - определить правильное поле для отображения имени этапа (вероятнее всего `title` или аналог);
     - заменить обращения к `*.name` на корректное свойство в модели `GTMStage` (или добавить поле `name`, если оно концептуально нужно, и в репозитории, и в модели);
     - убедиться, что логирование событий по GTM-этапам больше не вызывает ошибок;
     - протестировать:
       - создание нового этапа,
       - обновление этапа,
       - сохранение шаблона GTM,
       - применение шаблона.

---

## 4. Ввод данных и работа с задачами, подзадачами, комментариями

10. [P1] **Характеристики, подзадачи и задачи — инлайн-ввод и улучшенный UX**

   10.1. **Характеристики**
   - Сейчас: ввод значений через диалоговое окно.
   - Нужно:
     - обеспечить ввод и редактирование **прямо в таблице** (инлайн);
     - при изменении ячеек реализовать автосохранение (или понятную кнопку «Сохранить»/индикатор сохранения);
     - оставить структуру RU/EN рядом.

   10.2. **Подзадачи**
   - Ввод подзадач — **инлайн**, прямо под задачей:
     - быстрое добавление нового пункта без отдельного модального окна;
     - редактирование текста подзадачи на месте.
   - Подзадачи должны **влиять на прогресс задачи**:
     - прогресс задачи = доля выполненных подзадач;
     - визуально показывать прогресс (например, мини-прогресс-бар рядом с задачей).

   10.3. **Визуальный UX для задач и подзадач**
   - Визуально улучшить блок задач:
     - выделить подзадачи (отступы, отрисовка, чекбоксы),
     - обеспечить удобное чтение и быстрое сканирование статуса.
   - Проработать вертикальное восприятие:
     - добиться ощущения аккуратного, структурированного списка, а не “простынь текста”.

11. [P2] **Комментарии — инлайн-ввод + текстовый редактор**
   - Отказаться от ввода комментариев только через всплывающие модальные окна.
   - Реализовать:
     - добавление комментария **прямо в блоке комментариев** (inline);
     - использование лёгкого текстового редактора (минимум: жирный, курсив, списки, ссылки).
   - Возможность:
     - редактировать и удалять комментарии (при необходимости — с меткой «изменён»).

---

## 5. Галерея, обложка и история изменений

12. [P2] **Сделать галерею и работу с обложкой компактнее и более современной**
   - Переработать визуал:
     - компактная сетка/лента изображений;
     - ясные подписи, аккуратные карточки.
   - Добавить **лайтбокс**:
     - по клику на изображение открывать увеличенную версию в оверлее;
     - возможность листать изображения стрелками.
   - Управление обложкой:
     - чётко видна текущая обложка;
     - простая кнопка «Сделать обложкой».

13. [P3] **История изменений — сделать компактнее и менее навязчивой**
   - История не должна перетягивать внимание с ключевых блоков.
   - Реализовать:
     - историю в виде **сворачиваемого блока** (например, аккордеон с заголовком «История изменений»);
     - по умолчанию блок может быть свернут;
     - компактный формат записи событий (дата, действие, краткое описание).

---

## 6. Шаблоны, кастомные поля и ID

14. [P1] **Раздел «Шаблоны» для централизованной работы с ними**
   - Создать отдельный раздел/страницу для управления шаблонами:
     - шаблоны GTM-этапов;
     - шаблоны характеристик.
   - Возможности:
     - просматривать список шаблонов;
     - редактировать и переименовывать шаблоны;
     - удалять шаблоны (с подтверждением);
     - возможно — создать новый шаблон «с нуля» без привязки к конкретному проекту.

15. [P2] **Кастомные поля на уровне GTM-этапа**
   - Добавить к GTM-этапам поддержку пользовательских полей:
     - текстовые поля;
     - числовые;
     - флажки;
     - (опционально) списки.
   - Пользователь должен иметь возможность:
     - добавить пользовательское поле к этапу;
     - изменить его название;
     - удалить поле.
   - Эти поля должны сохраняться и корректно работать в шаблонах GTM.

16. [P2] **ID карточек — короткие цифровые идентификаторы**
   - Ввести **короткие цифровые ID** для ключевых сущностей (минимум: проекты; возможно, задачи/группы).
   - Требования:
     - ID не должен быть длинным UUID в интерфейсе;
     - хранить UUID внутри системы, а отображать короткий цифровой ID;
     - в шапке проекта (и/или группы, задачи) отображать этот ID.
   - Добавить кнопку **«Скопировать ID»**:
     - одна кнопка копирует ID в буфер обмена;
     - визуальный фидбек («ID скопирован»).

---

## 7. Backend: исправление ошибок и регрессия

17. [P1] **Исправить backend-ошибки при работе с GTM-этапами**
   - Текущие ошибки:
     - `AttributeError: 'GTMStage' object has no attribute 'name'`:
       - при создании (`create_gtm_stage` → `log_event(..., created.name)`);
       - при обновлении (`update_gtm_stage` → `existing.name`).
   - Действия:
     - найти модель `GTMStage` и определить, какие поля используются для наименования (например, `title`/`label`);
     - заменить обращения к `name` на корректное поле либо добавить поле `name` во все уровни:
       - модель Pydantic,
       - модель в репозитории/хранилище,
       - миграции/инициализация данных (если нужно);
     - убедиться, что логи истории изменений корректно формируются:
       - при добавлении этапа;
       - при изменении статуса этапа;
       - при сохранении шаблона;
       - при применении шаблона к проекту.

18. [P1] **Провести регрессионное тестирование основных API-эндпоинтов**
   - Проверить:
     - создание/обновление/удаление GTM-этапов;
     - создание/обновление задач и подзадач;
     - создание/удаление характеристик (секций и полей);
     - загрузку/скачивание/удаление файлов и изображений;
     - работу с шаблонами GTM и характеристик;
     - историю изменений и комментарии.
   - Убедиться, что в логах нет повторяющихся ошибок и 500 ошибок сервера.

---

Этот backlog доработок должен использоваться как ориентир для следующей итерации развития Haier Project Tracker.  
После завершения каждого из пунктов рекомендуется:

- ставить рядом пометку `[x]` (если используется как чек-лист),
- фиксировать факт изменения в истории проекта и/или в отдельном changelog.
